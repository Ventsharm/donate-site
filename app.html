<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Your account</title><style>body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,sans-serif;background:#f3f6ff;margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:18px} .card{width:min(700px,100%);background:#fff;border-radius:22px;box-shadow:0 10px 35px rgba(0,0,0,.10);padding:22px} h1{margin:0 0 10px;font-size:44px;letter-spacing:-1px} .msg{padding:12px 14px;border-radius:14px;margin:10px 0 14px;font-weight:700;background:#e9fbef;color:#116a2b;border:1px solid #bfeccc} button{padding:12px 14px;border-radius:14px;border:0;font-weight:900;cursor:pointer;background:#f1f1f1}</style></head><body><div class="card"><h1>Your account</h1><div id="msg" class="msg">Loading…</div><button id="logout">Logout</button><div style="margin-top:18px;opacity:.75">Put your real app UI here.</div></div><script type="module">
import{initializeApp}from"https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
import{getAuth,onAuthStateChanged,signOut}from"https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";
import{getFirestore,doc,getDoc}from"https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

const firebaseConfig={apiKey:"AIzaSyBMZo5HOStyDEINl2xLm-M9X4PaDc-raBQ",authDomain:"donate-app-ff07c.firebaseapp.com",projectId:"donate-app-ff07c",storageBucket:"donate-app-ff07c.firebasestorage.app",messagingSenderId:"950201336557",appId:"1:950201336557:web:e8bdfa02d99512051f82e4"};
const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app);
const msg=document.getElementById("msg");

async function hasPaid(uid){
  const snap=await getDoc(doc(db,"users",uid));
  return snap.exists() && snap.data()?.paid===true;
}

document.getElementById("logout").onclick=async()=>{await signOut(auth);location.href="login.html";};

onAuthStateChanged(auth,async(user)=>{
  if(!user){location.href="login.html";return;}
  msg.textContent="Checking access…";
  try{
    if(!(await hasPaid(user.uid))){location.href="login.html?needpay=1";return;}
    msg.textContent="Access granted ✅";
  }catch(e){
    msg.textContent="Access check failed.";
    location.href="login.html";
  }
});
</script></body></html>
