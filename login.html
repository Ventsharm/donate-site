<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Login</title><style>body{font-family:sans-serif;max-width:520px;margin:0 auto;padding:24px}h1{margin:10px 0 18px}input,button{width:100%;padding:14px;border-radius:12px;border:1px solid rgba(0,0,0,.15);font-size:16px;box-sizing:border-box}button{border:0;cursor:pointer;margin-top:10px}#msg{margin-top:12px;padding:12px 14px;border-radius:12px;border:1px solid rgba(0,0,0,.12);display:none}small{opacity:.7}a{cursor:pointer}</style></head><body><h1>Sign in</h1><small>Email + password</small><div style="height:14px"></div><input id="email" type="email" placeholder="Email"><div style="height:10px"></div><input id="pass" type="password" placeholder="Password"><button id="login">Login</button><button id="signup" style="background:#111;color:#fff">Create account</button><button id="reset" style="background:#eee">Forgot password</button><div id="msg"></div><script type="module">import{initializeApp}from"https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";import{getAuth,setPersistence,browserLocalPersistence,createUserWithEmailAndPassword,signInWithEmailAndPassword,sendPasswordResetEmail,onAuthStateChanged}from"https://www.gstatic.com/firebasejs/10.12.5/firebase-auth.js";import{getFirestore,doc,getDoc,setDoc,serverTimestamp}from"https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";const firebaseConfig={apiKey:"PASTE_API_KEY",authDomain:"PASTE_AUTH_DOMAIN",projectId:"PASTE_PROJECT_ID",storageBucket:"PASTE_STORAGE_BUCKET",messagingSenderId:"PASTE_SENDER_ID",appId:"PASTE_APP_ID"};const app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app);const $=id=>document.getElementById(id),show=(t,ok=1)=>{const m=$("msg");m.style.display="block";m.textContent=t;m.style.borderColor=ok?"rgba(0,0,0,.12)":"rgba(255,0,0,.35)"};await setPersistence(auth,browserLocalPersistence);onAuthStateChanged(auth,async u=>{if(!u)return;location.href="app.html"});const getVals=()=>({email:$("email").value.trim(),pass:$("pass").value});$("login").onclick=async()=>{try{const{email,pass}=getVals();if(!email||!pass)return show("Enter email + password",0);await signInWithEmailAndPassword(auth,email,pass);location.href="app.html"}catch(e){show(e.message||String(e),0)}};$("signup").onclick=async()=>{try{const{email,pass}=getVals();if(!email||!pass)return show("Enter email + password",0);const cred=await createUserWithEmailAndPassword(auth,email,pass);const u=cred.user;const ref=doc(db,"users",u.uid);const snap=await getDoc(ref);if(!snap.exists())await setDoc(ref,{email:u.email||"",unlocked:false,createdAt:serverTimestamp()},{merge:true});show("Account created. Redirectingâ€¦");setTimeout(()=>location.href="app.html",500)}catch(e){show(e.message||String(e),0)}};$("reset").onclick=async()=>{try{const email=$("email").value.trim();if(!email)return show("Enter your email first",0);await sendPasswordResetEmail(auth,email);show("Password reset email sent.");}catch(e){show(e.message||String(e),0)}};</script></body></html>
